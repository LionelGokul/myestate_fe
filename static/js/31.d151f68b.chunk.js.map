{"version":3,"sources":["pages/User/User.js"],"names":["UserSections","lazy","UserForm","User","props","alertContext","useContext","AlertMessageContext","useStateValue","user","dispatch","useState","profilePic","setProfilePic","sendRequest","useAxios","initialValues","name","email","undefined","mobile","password","fallback","className","initialValue","onSubmit","data","formData","FormData","append","id","then","type","ACTIONS","UPDATE_USER","imageUrl","setOpen","setSuccess","setMsg","handleClose","catch","err","console","log","title"],"mappings":"qLASMA,EAAeC,gBAAK,kBAAM,gEAC1BC,EAAWD,gBAAK,kBAAM,yDAoEbE,UAlEF,SAACC,GACZ,IAAMC,EAAeC,qBAAWC,KADV,EAEOC,cAFP,mBAEbC,EAFa,KAEbA,KAAQC,EAFK,OAGcC,mBAAS,MAHvB,mBAGfC,EAHe,KAGHC,EAHG,KAIdC,EAAgBC,cAAhBD,YAEFE,EAAgB,CACpBC,KAAMR,EAAKQ,KACXC,WAAsBC,IAAfV,EAAKS,MAAsBT,EAAKS,MAAQ,GAC/CE,YAAwBD,IAAhBV,EAAKW,OAAuBX,EAAKW,OAAS,GAClDC,cAA4BF,IAAlBV,EAAKY,SAAyBZ,EAAKY,SAAW,IAmC1D,OACE,kBAAC,WAAD,CAAUC,SAAU,kBAAC,IAAD,OAClB,yBAAKC,UAAU,qBACb,kBAACvB,EAAD,OAGF,yBAAKuB,UAAU,eACb,kBAAC,IAAD,CAAMC,aAAcR,EAAeS,SAvCxB,SAACC,GAChB,IAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAASjB,GACzBe,EAASE,OAAO,YAA4B,OAAfjB,GAC7Be,EAASE,OAAO,QAASH,EAAKR,OAC9BS,EAASE,OAAO,SAAUH,EAAKN,QAC/BO,EAASE,OAAO,SAAUpB,EAAKqB,IAC/BH,EAASE,OAAO,OAAQH,EAAKT,MAE7BH,EAAY,OAAQ,eAAgBa,EAAU,CAC5C,eAAgB,wBAEfI,MAAK,SAACtB,GACLC,EAAS,CACPsB,KAAMC,IAAQC,YACdzB,KAAM,CACJQ,KAAMR,EAAKQ,KACXa,GAAIrB,EAAKqB,GACTK,SAAU1B,EAAKG,WACfM,MAAOT,EAAKS,MACZE,OAAQX,EAAKW,UAGjBf,EAAa+B,SAAQ,GACrB/B,EAAagC,YAAW,GACxBhC,EAAaiC,OAAO,qCACpBlC,EAAMmC,iBAEPC,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAWV,kBAAC,IAAD,CAAOG,MAAM,mBACb,kBAAC1C,EAAD,CACEO,KAAMA,EACNG,WAAYA,EACZC,cAAeA,KAGnB,yBAAKU,UAAU","file":"static/js/31.d151f68b.chunk.js","sourcesContent":["import React, { useState, Suspense, lazy, useContext } from 'react';\r\nimport { useAxios } from '../../shared/hooks/useAxios';\r\nimport Form from '../../shared/components/FormElements/Form';\r\nimport Title from '../../shared/components/UIElements/Title';\r\nimport { useStateValue } from '../../shared/DataLayer/Context';\r\nimport { ACTIONS } from '../../shared/DataLayer/reducer';\r\nimport Loader from '../../shared/components/UIElements/Loader';\r\nimport AlertMessageContext from '../../shared/DataLayer/AlertMesageContext';\r\n\r\nconst UserSections = lazy(() => import('./Components/UserSections'));\r\nconst UserForm = lazy(() => import('./Components/UserForm'));\r\n\r\nconst User = (props) => {\r\n  const alertContext = useContext(AlertMessageContext);\r\n  const [{ user }, dispatch] = useStateValue();\r\n  const [profilePic, setProfilePic] = useState(null);\r\n  const { sendRequest } = useAxios();\r\n\r\n  const initialValues = {\r\n    name: user.name,\r\n    email: user.email !== undefined ? user.email : '',\r\n    mobile: user.mobile !== undefined ? user.mobile : '',\r\n    password: user.password !== undefined ? user.password : '',\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    const formData = new FormData();\r\n    formData.append('image', profilePic);\r\n    formData.append('saveImage', profilePic === null ? false : true);\r\n    formData.append('email', data.email);\r\n    formData.append('mobile', data.mobile);\r\n    formData.append('userId', user.id);\r\n    formData.append('name', data.name);\r\n\r\n    sendRequest('post', 'users/update', formData, {\r\n      'content-type': 'multipart/form-data',\r\n    })\r\n      .then((user) => {\r\n        dispatch({\r\n          type: ACTIONS.UPDATE_USER,\r\n          user: {\r\n            name: user.name,\r\n            id: user.id,\r\n            imageUrl: user.profilePic,\r\n            email: user.email,\r\n            mobile: user.mobile,\r\n          },\r\n        });\r\n        alertContext.setOpen(true);\r\n        alertContext.setSuccess(true);\r\n        alertContext.setMsg('Successfully updated user details');\r\n        props.handleClose();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  return (\r\n    <Suspense fallback={<Loader />}>\r\n      <div className=\"cmn_section no_bg\">\r\n        <UserSections />\r\n      </div>\r\n\r\n      <div className=\"cmn_section\">\r\n        <Form initialValue={initialValues} onSubmit={onSubmit}>\r\n          <Title title=\"Update Details\" />\r\n          <UserForm\r\n            user={user}\r\n            profilePic={profilePic}\r\n            setProfilePic={setProfilePic}\r\n          />\r\n        </Form>\r\n        <div className=\"margin_top\"></div>\r\n      </div>\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default User;\r\n"],"sourceRoot":""}